<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script type="application/javascript">var il = il || {}; window.il = il;</script>
    <script type="application/javascript" src="./core.js"></script>
    <title>Test</title>
</head>
<body>
    <h1>Hello world - Signal example</h1>

    <div class="c-component--unhydrated" data-hydrated-by="signal/createTriggerer">
        <button id="cid1" class="c-button c-triggerer" data-triggered-signals='[
            {
                "id": "signal_id_1",
                "event": "click",
                "options": {
                    "foo": "bar"
                }
            },
            {
                "id": "signal_id_2",
                "event": "click",
                "options": {
                    "foo": "baz"
                }
            }
        ]'>Send Signal</button>
        <script type="application/javascript">
            il.UI.JavaScriptBinding.addFunction('cid1', (component) => {
              component.querySelectorAll('button').forEach((button) => {
                button.addEventListener('click', () => {
                  console.log(`Button ${button.textContent} clicked.`);
                })
              });
            });
        </script>
    </div>

    <div class="c-component--unhydrated" data-hydrated-by="signal/createListener">
        <div id="cid2" class="c-trigerrable" data-triggering-signals='[
            "signal_id_1",
            "signal_id_2"
        ]'>
            <span>Nothing received yet.</span>
        </div>
        <script type="application/javascript">
          il.UI.JavaScriptBinding.addFunction('cid2', (component) => {
            console.log('I am ready to be triggered.');
          });
        </script>
    </div>

    <div class="c-wrapper" style="margin-top: 25px;">
        <button id="cid3" class="c-button" onclick="il.UI.hydrateComponents(document.body);">Hydrate!</button>
    </div>

    <script type="application/javascript">
        // window.onload = () => {
        //   il.UI.hydrateComponents(document.body);
        // }
    </script>
</body>
</html>